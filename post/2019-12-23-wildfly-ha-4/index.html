<!DOCTYPE html>
<html lang="en-us"><head>
  
    
      






<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Building a Mission-Critical Open Source Environment for the Java Platform - Chapter IV | Cognition</title>
<meta name="title" content="Building a Mission-Critical Open Source Environment for the Java Platform - Chapter IV | Cognition" />
<meta name="description" content="Below are the chapters I, II and III:
 Building a Mission-Critical Open Source Environment for the Java Platform - Chapter I Building a Mission-Critical Open Source Environment for the Java Platform - Chapter II Building a Mission-Critical Open Source Environment for the Java Platform - Chapter III  WildFly Scalability We will scale our instances manually using JBoss CLI and later this will be done automatically using a trigger via AlertManager."> 


<link rel="canonical" href="https://cognitionsh.github.io/post/2019-12-23-wildfly-ha-4/" />


  
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:description" content="" /> 
  <meta name="twitter:title" content="Building a Mission-Critical Open Source Environment for the Java Platform - Chapter IV | Cognition" />
  <meta name="twitter:url" content="https://cognitionsh.github.io/post/2019-12-23-wildfly-ha-4/" />
  <meta name="twitter:site" content="@Softorage" /> 
  <meta name="twitter:creator" content="@Softorage" /> 
   



  
  <meta property="og:title" content="Building a Mission-Critical Open Source Environment for the Java Platform - Chapter IV | Cognition" />
  <meta property="og:description" content="" /> 
  <meta property="og:site_name" content="Cognition" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://cognitionsh.github.io/post/2019-12-23-wildfly-ha-4/" />
  
   






  
  
  <script type="application/ld+json">
      { 
          "@context": "http://schema.org", 
          "@type": "BlogPosting",
          "headline": "Building a Mission-Critical Open Source Environment for the Java Platform - Chapter IV",
          
          "url": "https://cognitionsh.github.io",
          
          
          "description": ,
          
          
          "publisher": {
            "@type": "Organization",
            "name": "Mauricio Magnani",
            "logo": {
              "@type": "ImageObject",
              "url": ""
            }
          },
          
          "sameAs" : [
            
            
              "https://github.com/cognitionsh"
            ]
          
        }
      </script>
  


    
    <meta name="generator" content="Hugo 0.80.0" />
  
  
  
  
  
  <link rel="stylesheet" href="/assets/css/main.min.5850e0d237d48db557dccb91349399dcb8ddfc839c5d757ef83da4cc45fca5ff.css" integrity="sha256-WFDg0jfUjbVX3MuRNJOZ3Ljd/IOcXXV&#43;&#43;D2kzEX8pf8=" crossorigin="anonymous">
  
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  
  <link rel=apple-touch-icon sizes=180x180 href=https://cognitionsh.github.io/assets/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://cognitionsh.github.io/assets/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://cognitionsh.github.io/assets/favicon/favicon-16x16.png><link rel=manifest href=https://cognitionsh.github.io/assets/favicon/site.webmanifest><link rel=mask-icon href=https://cognitionsh.github.io/assets/favicon/safari-pinned-tab.svg color=#7817c4><link rel=icon href=https://cognitionsh.github.io/assets/favicon/favicon.ico type=image/x-icon><link rel="shortcut icon" href=https://cognitionsh.github.io/assets/favicon/favicon.ico type=image/x-icon><meta name=apple-mobile-web-app-title content="Vibrant Shadows Theme"><meta name=application-name content="Vibrant Shadows Theme"><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff">
  
  
  
  <meta name="theme-color" content="#fff6f8">
  
  <meta name="msapplication-navbutton-color" content="#fff6f8">
  
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  
</head>
<body><header>
  <nav class="navbar navbar-expand-lg navbar-light fixed-top flex-column">
    <div class="container-fluid">
      
      <a class="navbar-brand rounded px-3" href="https://cognitionsh.github.io"><span class="text-nav"><span class="brand">&nbsp;&nbsp;&nbsp;Cognition</span></span></a>
      
      
    </div>
    
  </nav>
</header>
<div id="content">
<div class="container-fluid bg-clr1 text-light text-center pb-3 pt-4 position-relative shadow">
  <div style="height:3.5rem;"></div>
  <h1>Building a Mission-Critical Open Source Environment for the Java Platform - Chapter IV</h1>
  <p class="description"></p>
</div>
<div class="container-fluid bg-nav p-4">
  <div class="row">
    <div class="col-md-3">
      
      <div class="bg-mat p-4 rounded" style="overflow-x: auto;">
        <div class="h4 mb-3">
        Contents
        </div>
        <nav id="TableOfContents">
  <ol>
    <li><a href="#wildfly-scalability">WildFly Scalability</a></li>
    <li><a href="#wildfly-event-based-auto-scaling">WildFly Event-based Auto Scaling</a></li>
  </ol>
</nav>
      </div>
      
    </div>
    <div class="col-md-9">
        
      
      <div class="py-1">
        <div class="row">
          <div class="col-md-7 small text-muted post-meta my-1">
            
            
              
                
              
            
              
            
              
                
              
            
              
            By Mauricio Magnani &#183; 10 min read</div>
          
          
          
          <div class="col-md-auto ml-3 my-1">
            <div class="row">
              <div class="col-auto p-0">
              Share on:&nbsp;&nbsp;
              </div>
              <div class="col p-0">
                <span class="lead">
                  
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fcognitionsh.github.io%2fpost%2f2019-12-23-wildfly-ha-4%2f&quote=Building%20a%20Mission-Critical%20Open%20Source%20Environment%20for%20the%20Java%20Platform%20-%20Chapter%20IV" rel="noreferrer nofollow" target="_blank" title="Share on Facebook" aria-label="Share on Facebook"><span class="fab fa-facebook"></span></a>&nbsp;&nbsp;
                  
                  
                    <a href="https://twitter.com/intent/tweet?source=https%3a%2f%2fcognitionsh.github.io%2fpost%2f2019-12-23-wildfly-ha-4%2f&text=Building%20a%20Mission-Critical%20Open%20Source%20Environment%20for%20the%20Java%20Platform%20-%20Chapter%20IV:%0Ahttps%3a%2f%2fcognitionsh.github.io%2fpost%2f2019-12-23-wildfly-ha-4%2f" rel="noreferrer nofollow" target="_blank" title="Share on Twitter" aria-label="Share on Twitter"><span class="fab fa-twitter"></span></a>&nbsp;&nbsp;
                  
                  
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcognitionsh.github.io%2fpost%2f2019-12-23-wildfly-ha-4%2f&title=Building%20a%20Mission-Critical%20Open%20Source%20Environment%20for%20the%20Java%20Platform%20-%20Chapter%20IV&summary=&source=Cognition" rel="noreferrer nofollow" target="_blank" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="fab fa-linkedin"></span></a>&nbsp;&nbsp;
                  
                  
                    <a href="https://t.me/share/url?url=https%3a%2f%2fcognitionsh.github.io%2fpost%2f2019-12-23-wildfly-ha-4%2f&text=Building%20a%20Mission-Critical%20Open%20Source%20Environment%20for%20the%20Java%20Platform%20-%20Chapter%20IV" rel="noreferrer nofollow" target="_blank" title="Share on Telegram" aria-label="Share on Telegram"><span class="fab fa-telegram"></span></a>&nbsp;&nbsp;
                  
                  
                    <a href="whatsapp://send?text=https%3a%2f%2fcognitionsh.github.io%2fpost%2f2019-12-23-wildfly-ha-4%2f%0A%0ABuilding%20a%20Mission-Critical%20Open%20Source%20Environment%20for%20the%20Java%20Platform%20-%20Chapter%20IV" data-text="Building a Mission-Critical Open Source Environment for the Java Platform - Chapter IV" data-href="https://cognitionsh.github.io/post/2019-12-23-wildfly-ha-4/" rel="noreferrer nofollow" target="_blank" title="Share on Whatsapp" aria-label="Share on Whatsapp"><span class="fab fa-whatsapp"></span></a>&nbsp;&nbsp;
                  
                  
                    <a href="https://reddit.com/submit?url=https%3a%2f%2fcognitionsh.github.io%2fpost%2f2019-12-23-wildfly-ha-4%2f&title=Building%20a%20Mission-Critical%20Open%20Source%20Environment%20for%20the%20Java%20Platform%20-%20Chapter%20IV" rel="noreferrer nofollow" target="_blank" title="Share on Reddit" aria-label="Share on Reddit"><span class="fab fa-reddit"></span></a>&nbsp;&nbsp;
                  
                  
                    <a href="mailto:?subject=Building%20a%20Mission-Critical%20Open%20Source%20Environment%20for%20the%20Java%20Platform%20-%20Chapter%20IV&body=%0A%0Ahttps%3a%2f%2fcognitionsh.github.io%2fpost%2f2019-12-23-wildfly-ha-4%2f" target="_blank" title="Share via email" aria-label="Share via email"><span class="fas fa-envelope"></span></a>
                  
                </span>
              </div>
            </div>
          </div>
          
        </div>
        
        
        
      </div>
      
      
      <div class="py-3 my-2">
      <p>Below are the chapters I, II and III:</p>
<ul>
<li><a href="http://mlab.run/2019/12/18/wildfly-ha-1">Building a Mission-Critical Open Source Environment for the Java Platform - Chapter I</a></li>
<li><a href="http://mlab.run/2019/12/21/wildfly-ha-2">Building a Mission-Critical Open Source Environment for the Java Platform - Chapter II</a></li>
<li><a href="http://mlab.run/2019/12/21/wildfly-ha-3/">Building a Mission-Critical Open Source Environment for the Java Platform - Chapter III</a></li>
</ul>
<h2 id="wildfly-scalability">WildFly Scalability</h2>
<p>We will scale our instances manually using JBoss CLI and later this will be done automatically using a trigger via AlertManager.</p>
<p>So the first step is to test the creation of a new instance using JBoss CLI.</p>
<p>Use the master host itself for these tests. Create a file called create-server.cli:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">/host<span style="color:#f92672">=</span>slave0/server-config<span style="color:#f92672">=</span>server-marketing-7:add<span style="color:#f92672">(</span>auto-start<span style="color:#f92672">=</span>true,socket-binding-port-offset<span style="color:#f92672">=</span>400,group<span style="color:#f92672">=</span>marketing<span style="color:#f92672">)</span>
/host<span style="color:#f92672">=</span>slave0/server-config<span style="color:#f92672">=</span>server-marketing-7/system-property<span style="color:#f92672">=</span>jboss.node.name:add<span style="color:#f92672">(</span>value<span style="color:#f92672">=</span>node-marketing-7<span style="color:#f92672">)</span>
/host<span style="color:#f92672">=</span>slave0/server-config<span style="color:#f92672">=</span>server-marketing-7/system-property<span style="color:#f92672">=</span>wildfly.balancer.name:add<span style="color:#f92672">(</span>value<span style="color:#f92672">=</span>marketing-lb<span style="color:#f92672">)</span>
/host<span style="color:#f92672">=</span>slave0/server<span style="color:#f92672">=</span>server-marketing-7:start
</code></pre></div><p>After that runs via command line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>root@server-domain ~<span style="color:#f92672">]</span><span style="color:#75715e"># sh /usr/local/wildfly/wildfly-18.0.1.Final/bin/jboss-cli.sh -c --controller=10.0.0.68:9990 --user=admin --password=redhat --file=create-server.cli</span>
</code></pre></div><p>The script creates a new WildFly instance (server-marketing-7) on slave0 and starts it immediately.</p>
<p>Note that a few seconds later the instance is already available on the balancer and also the application will be deployed automatically. This gives us a very interesting scalability in our WildFly environment.</p>
<p><img src="/static/201912-hawildfly-19.png" alt=""></p>
<p><img src="/static/201912-hawildfly-20.png" alt=""></p>
<p>Unfortunately this process is manual and failures can happen. We will automate it in the next steps.</p>
<h2 id="wildfly-event-based-auto-scaling">WildFly Event-based Auto Scaling</h2>
<p>To achieve the goal simply and effectively we will use Prometheus, AlertManager and Webhook.</p>
<ul>
<li>Prometheus - <a href="https://prometheus.io">https://prometheus.io</a></li>
<li>AlertManager - <a href="https://prometheus.io/docs/alerting/alertmanager">https://prometheus.io/docs/alerting/alertmanager</a></li>
<li>Webhook - <a href="https://github.com/adnanh/webhook">https://github.com/adnanh/webhook</a></li>
</ul>
<p>For this purpose I will use the server: monitor.mmagnani.lab - 10.0.0.117</p>
<p>The first step is to install Webhook.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cat /etc/redhat-release </span>
CentOS Linux release 7.7.1908 <span style="color:#f92672">(</span>Core<span style="color:#f92672">)</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl stop firewalld</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl disable firewalld</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># setenforce 0</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed -i &#34;s/^SELINUX=enforcing/SELINUX=disabled/g&#34; /etc/selinux/config</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># mkdir -p /usr/local/webhook</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># wget https://github.com/adnanh/webhook/releases/download/2.6.11/webhook-linux-amd64.tar.gz -P /usr/local/webhook/</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cd /usr/local/webhook/</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># tar -xzvf webhook-linux-amd64.tar.gz </span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cd webhook-linux-amd64</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
webhook
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># pwd</span>
/usr/local/webhook/webhook-linux-amd64
</code></pre></div><p>Now create the hooks.json file that will contain the action to take when any event happens:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># pwd</span>
/usr/local/webhook/webhook-linux-amd64
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># vi /usr/local/webhook/webhook-linux-amd64/hooks.json</span>
</code></pre></div><p>{% highlight json %}
[
{
&ldquo;id&rdquo;: &ldquo;scale-wildfly&rdquo;,
&ldquo;execute-command&rdquo;: &ldquo;/var/scripts/scale-wildfly.sh&rdquo;,
&ldquo;command-working-directory&rdquo;: &ldquo;/var/webhook&rdquo;
}
]</p>
<pre><code>
Create the scale-wildfly.sh script that will actually contain JBoss CLI actions:

```shell
[root@monitor ~]# mkdir -p /var/scripts/
[root@monitor ~]# mkdir -p /var/webhook
[root@monitor ~]# vi /var/scripts/scale-wildfly.sh
#!/bin/bash
/usr/local/wildfly/wildfly-18.0.1.Final/bin/jboss-cli.sh -c --controller=10.0.0.68:9990  &lt;&lt;EOF
/host=slave0/server-config=server-marketing-8:add(auto-start=true,socket-binding-port-offset=400,group=marketing)
/host=slave0/server-config=server-marketing-8/system-property=jboss.node.name:add(value=node-marketing-8)
/host=slave0/server-config=server-marketing-8/system-property=wildfly.balancer.name:add(value=marketing-lb)
/host=slave0/server=server-marketing-8:start
EOF
[root@monitor ~]# chmod +x /var/scripts/scale-wildfly.sh
</code></pre><p>We will need the client which in this case is the JBoss CLI. For simplicity I will just unzip WildFly&rsquo;s zip into a directory.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># yum install java-1.8.0-openjdk-devel.x86_64 -y</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># mkdir -p /usr/local/wildfly</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># wget https://download.jboss.org/wildfly/18.0.1.Final/wildfly-18.0.1.Final.zip -P /usr/local/wildfly</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cd /usr/local/wildfly</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># unzip wildfly-18.0.1.Final.zip</span>
</code></pre></div><p>Now start webhook:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># pwd</span>
/usr/local/webhook/webhook-linux-amd64
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># ./webhook  -hooks hooks.json -verbose</span>
 <span style="color:#75715e">####TODO put this as a service script</span>
</code></pre></div><p>It will start up on default port 9000 and will provide you with one HTTP endpoint: <a href="http://monitor.mmagnani.lab:9000/hooks/scale-wildfly">http://monitor.mmagnani.lab:9000/hooks/scale-wildfly</a></p>
<p>By performing a simple HTTP GET or POST request to that endpoint, the specified script would be executed.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/27 17:25:59 <span style="color:#f92672">[</span>b23fed<span style="color:#f92672">]</span> incoming HTTP request from 10.0.0.114:52462
<span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/27 17:25:59 <span style="color:#f92672">[</span>b23fed<span style="color:#f92672">]</span> scale-wildfly got matched
<span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/27 17:25:59 <span style="color:#f92672">[</span>b23fed<span style="color:#f92672">]</span> error parsing body payload due to unsupported content type header: 
<span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/27 17:25:59 <span style="color:#f92672">[</span>b23fed<span style="color:#f92672">]</span> scale-wildfly hook triggered successfully
<span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/27 17:25:59 <span style="color:#ae81ff">200</span> | 232.132µs | monitor.mmagnani.lab:9000 | GET /hooks/scale-wildfly 
<span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/27 17:25:59 <span style="color:#f92672">[</span>b23fed<span style="color:#f92672">]</span> executing /var/scripts/scale-wildfly.sh <span style="color:#f92672">(</span>/var/scripts/scale-wildfly.sh<span style="color:#f92672">)</span> with arguments <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;/var/scripts/scale-wildfly.sh&#34;</span><span style="color:#f92672">]</span> and environment <span style="color:#f92672">[]</span> using /var/webhook as cwd
<span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/27 17:26:02 <span style="color:#f92672">[</span>b23fed<span style="color:#f92672">]</span> command output: <span style="color:#f92672">[</span>domain@10.0.0.68:9990 /<span style="color:#f92672">]</span> /host<span style="color:#f92672">=</span>slave0/server-config<span style="color:#f92672">=</span>server-marketing-8:add<span style="color:#f92672">(</span>auto-start<span style="color:#f92672">=</span>true,socket-binding-port-offset<span style="color:#f92672">=</span>400,group<span style="color:#f92672">=</span>marketing<span style="color:#f92672">)</span>
<span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;outcome&#34;</span> <span style="color:#f92672">=</span>&gt; <span style="color:#e6db74">&#34;success&#34;</span>,
    <span style="color:#e6db74">&#34;result&#34;</span> <span style="color:#f92672">=</span>&gt; undefined,
    <span style="color:#e6db74">&#34;server-groups&#34;</span> <span style="color:#f92672">=</span>&gt; undefined
<span style="color:#f92672">}</span>
<span style="color:#f92672">[</span>domain@10.0.0.68:9990 /<span style="color:#f92672">]</span> /host<span style="color:#f92672">=</span>slave0/server-config<span style="color:#f92672">=</span>server-marketing-8/system-property<span style="color:#f92672">=</span>jboss.node.name:add<span style="color:#f92672">(</span>value<span style="color:#f92672">=</span>node-marketing-8<span style="color:#f92672">)</span>
<span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;outcome&#34;</span> <span style="color:#f92672">=</span>&gt; <span style="color:#e6db74">&#34;success&#34;</span>,
    <span style="color:#e6db74">&#34;result&#34;</span> <span style="color:#f92672">=</span>&gt; undefined,
    <span style="color:#e6db74">&#34;server-groups&#34;</span> <span style="color:#f92672">=</span>&gt; undefined
<span style="color:#f92672">}</span>
<span style="color:#f92672">[</span>domain@10.0.0.68:9990 /<span style="color:#f92672">]</span> /host<span style="color:#f92672">=</span>slave0/server-config<span style="color:#f92672">=</span>server-marketing-8/system-property<span style="color:#f92672">=</span>wildfly.balancer.name:add<span style="color:#f92672">(</span>value<span style="color:#f92672">=</span>marketing-lb<span style="color:#f92672">)</span>
<span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;outcome&#34;</span> <span style="color:#f92672">=</span>&gt; <span style="color:#e6db74">&#34;success&#34;</span>,
    <span style="color:#e6db74">&#34;result&#34;</span> <span style="color:#f92672">=</span>&gt; undefined,
    <span style="color:#e6db74">&#34;server-groups&#34;</span> <span style="color:#f92672">=</span>&gt; undefined
<span style="color:#f92672">}</span>
<span style="color:#f92672">[</span>domain@10.0.0.68:9990 /<span style="color:#f92672">]</span> /host<span style="color:#f92672">=</span>slave0/server<span style="color:#f92672">=</span>server-marketing-8:start
<span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;outcome&#34;</span> <span style="color:#f92672">=</span>&gt; <span style="color:#e6db74">&#34;success&#34;</span>,
    <span style="color:#e6db74">&#34;result&#34;</span> <span style="color:#f92672">=</span>&gt; <span style="color:#e6db74">&#34;STARTING&#34;</span>
<span style="color:#f92672">}</span>
<span style="color:#f92672">[</span>domain@10.0.0.68:9990 /<span style="color:#f92672">]</span> 
</code></pre></div><p>Note that the cluster was automatically escalated through a request using the endpoint.</p>
<p><img src="/static/201912-hawildfly-21.png" alt=""></p>
<p>Our goal was successfully achieved! The next step is to do this through AlertManager.</p>
<p>So at this point we will install Prometheus.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cd /tmp</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># wget https://github.com/prometheus/prometheus/releases/download/v2.15.1/prometheus-2.15.1.linux-amd64.tar.gz</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># useradd --no-create-home --shell /bin/false prometheus</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># mkdir /etc/prometheus</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># mkdir /var/lib/prometheus</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown prometheus:prometheus /etc/prometheus</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown prometheus:prometheus /var/lib/prometheus</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># tar -xvzf tar prometheus-2.15.1.linux-amd64.tar.gz</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># mv prometheus-2.15.1.linux-amd64 prometheus-package</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cp prometheus-package/prometheus /usr/local/bin/</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cp prometheus-package/promtool /usr/local/bin/</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown prometheus:prometheus /usr/local/bin/prometheus</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown prometheus:prometheus /usr/local/bin/promtool</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cp -r prometheus-package/consoles /etc/prometheus</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cp -r prometheus-package/console_libraries /etc/prometheus</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown -R prometheus:prometheus /etc/prometheus/consoles</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown -R prometheus:prometheus /etc/prometheus/console_libraries</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># vi /etc/prometheus/prometheus.yml</span>

global:
  scrape_interval: 10s

scrape_configs:
  - job_name: <span style="color:#e6db74">&#39;prometheus_master&#39;</span>
    scrape_interval: 5s
    static_configs:
      - targets: <span style="color:#f92672">[</span><span style="color:#e6db74">&#39;localhost:9090&#39;</span><span style="color:#f92672">]</span>

<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown prometheus:prometheus /etc/prometheus/prometheus.yml</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># vi /etc/systemd/system/prometheus.service</span>

<span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
Description<span style="color:#f92672">=</span>Prometheus
Wants<span style="color:#f92672">=</span>network-online.target
After<span style="color:#f92672">=</span>network-online.target

<span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
User<span style="color:#f92672">=</span>prometheus
Group<span style="color:#f92672">=</span>prometheus
Type<span style="color:#f92672">=</span>simple
ExecStart<span style="color:#f92672">=</span>/usr/local/bin/prometheus --config.file /etc/prometheus/prometheus.yml --storage.tsdb.path /var/lib/prometheus --web.console.templates<span style="color:#f92672">=</span>/etc/prometheus/consoles --web.console.libraries<span style="color:#f92672">=</span>/etc/prometheus/console_libraries

<span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
WantedBy<span style="color:#f92672">=</span>multi-user.target

<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl daemon-reload</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl start prometheus</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl status prometheus</span>
</code></pre></div><p>Use the following Url to access UI: <a href="http://monitor.mmagnani.lab:9090">http://monitor.mmagnani.lab:9090</a></p>
<p><img src="/static/201912-hawildfly-22.png" alt=""></p>
<p>Now let&rsquo;s install the blackbox exporter. The blackbox exporter allows blackbox probing of endpoints over HTTP, HTTPS, DNS, TCP and ICMP.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cd /tmp</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># wget https://github.com/prometheus/blackbox_exporter/releases/download/v0.16.0/blackbox_exporter-0.16.0.linux-amd64.tar.gz</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># useradd --no-create-home --shell /bin/false blackbox_exporter</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># tar -xvf blackbox_exporter-0.16.0.linux-amd64.tar.gz</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cp blackbox_exporter-0.16.0.linux-amd64/blackbox_exporter /usr/local/bin/blackbox_exporter</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown blackbox_exporter:blackbox_exporter /usr/local/bin/blackbox_exporter</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># mkdir /etc/blackbox_exporter</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># vi /etc/blackbox_exporter/blackbox.yml</span>

modules:
  http_2xx:
    prober: http
    timeout: 5s
    http:
      valid_status_codes: <span style="color:#f92672">[]</span>
      method: GET

<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown blackbox_exporter:blackbox_exporter /etc/blackbox_exporter/blackbox.yml</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># vi /etc/systemd/system/blackbox_exporter.service</span>

<span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
Description<span style="color:#f92672">=</span>Blackbox Exporter
Wants<span style="color:#f92672">=</span>network-online.target
After<span style="color:#f92672">=</span>network-online.target

<span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
User<span style="color:#f92672">=</span>blackbox_exporter
Group<span style="color:#f92672">=</span>blackbox_exporter
Type<span style="color:#f92672">=</span>simple
ExecStart<span style="color:#f92672">=</span>/usr/local/bin/blackbox_exporter --config.file /etc/blackbox_exporter/blackbox.yml

<span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
WantedBy<span style="color:#f92672">=</span>multi-user.target

<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl daemon-reload</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl start blackbox_exporter</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl enable blackbox_exporter</span>
</code></pre></div><p>Now edit the Prometheus configuration and add our target:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># vi /etc/prometheus/prometheus.yml</span>

  - job_name: <span style="color:#e6db74">&#39;blackbox-marketing&#39;</span>
    metrics_path: /probe
    params:
      module: <span style="color:#f92672">[</span>http_2xx<span style="color:#f92672">]</span>
    static_configs:
      - targets:
        - http://marketing.mmagnani.lab
    relabel_configs:
      - source_labels: <span style="color:#f92672">[</span>__address__<span style="color:#f92672">]</span>
        target_label: __param_target
      - source_labels: <span style="color:#f92672">[</span>__param_target<span style="color:#f92672">]</span>
        target_label: instance
      - target_label: __address__
        replacement: localhost:9115

<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl restart prometheus</span>
</code></pre></div><p>Create a alarm definition:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># vi /etc/prometheus/prometheus.rules.yml</span>

groups:
- name: alert.rules
  rules:
  - alert: EndpointDown
    expr: probe_success <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">for</span>: 10s
    labels:
      severity: <span style="color:#e6db74">&#34;critical&#34;</span>
    annotations:
      summary: <span style="color:#e6db74">&#34;Endpoint  down&#34;</span>

<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown prometheus:prometheus /etc/prometheus/prometheus.rules.yml</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># promtool check rules /etc/prometheus/prometheus.rules.yml</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl restart prometheus</span>
</code></pre></div><p>Please note that the Prometheus Target definitions already display our probe:</p>
<p><img src="/static/201912-hawildfly-23.png" alt=""></p>
<p>Finally install AlertManager.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cd /tmp</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># wget https://github.com/prometheus/alertmanager/releases/download/v0.20.0/alertmanager-0.20.0.linux-amd64.tar.gz</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># useradd --no-create-home --shell /bin/false alertmanager</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># tar -xvf alertmanager-0.20.0.linux-amd64.tar.gz </span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cp alertmanager-0.20.0.linux-amd64/alertmanager /usr/local/bin/</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># cp alertmanager-0.20.0.linux-amd64/amtool /usr/local/bin/</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown alertmanager:alertmanager /usr/local/bin/alertmanager</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown alertmanager:alertmanager /usr/local/bin/amtool</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># mkdir /etc/alertmanager</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># vi /etc/alertmanager/alertmanager.yml</span>

global:

route:
  group_by: <span style="color:#f92672">[</span><span style="color:#e6db74">&#39;instance&#39;</span>, <span style="color:#e6db74">&#39;alert&#39;</span><span style="color:#f92672">]</span>
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 3h
  receiver: default-receiver

receivers:
  - name: default-receiver
    webhook_configs:
      - url: <span style="color:#e6db74">&#34;http://monitor.mmagnani.lab:9000/hooks/scale-wildfly&#34;</span>

<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown alertmanager:alertmanager -R /etc/alertmanager</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># vi /etc/systemd/system/alertmanager.service</span>

<span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
Description<span style="color:#f92672">=</span>Alertmanager
Wants<span style="color:#f92672">=</span>network-online.target
After<span style="color:#f92672">=</span>network-online.target

<span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
User<span style="color:#f92672">=</span>alertmanager
Group<span style="color:#f92672">=</span>alertmanager
Type<span style="color:#f92672">=</span>simple
WorkingDirectory<span style="color:#f92672">=</span>/etc/alertmanager/
ExecStart<span style="color:#f92672">=</span>/usr/local/bin/alertmanager --config.file<span style="color:#f92672">=</span>/etc/alertmanager/alertmanager.yml --web.external-url http://0.0.0.0:9093

<span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
WantedBy<span style="color:#f92672">=</span>multi-user.target

<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># vi /etc/prometheus/prometheus.yml</span>
rule_files:
  - <span style="color:#e6db74">&#39;prometheus.rules.yml&#39;</span>
alerting:
  alertmanagers:
  - static_configs:
    - targets:
      - localhost:9093

<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl restart prometheus</span>
<span style="color:#f92672">[</span>root@monitor ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl restart alertmanager</span>
</code></pre></div><p>Note that the alert will be inactive: <a href="http://monitor.mmagnani.lab:9090/alerts">http://monitor.mmagnani.lab:9090/alerts</a></p>
<p><img src="/static/201912-hawildfly-24.png" alt=""></p>
<p>Check the AlertManager: <a href="http://monitor.mmagnani.lab:9093/#/alerts">http://monitor.mmagnani.lab:9093/#/alerts</a></p>
<p><img src="/static/201912-hawildfly-25.png" alt=""></p>
<p>Let&rsquo;s stop all instances of the marketing group to make sure the app is down.</p>
<p>When we stop instances the application will be &ldquo;down&rdquo; and our alert will be firing.</p>
<p><img src="/static/201912-hawildfly-26.png" alt=""></p>
<p><img src="/static/201912-hawildfly-27.png" alt=""></p>
<p><img src="/static/201912-hawildfly-28.png" alt=""></p>
<p>Our endpoint that performs environment scaling will be triggered:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/29 19:55:33 <span style="color:#f92672">[</span>5f95ff<span style="color:#f92672">]</span> incoming HTTP request from 10.0.0.117:38598
<span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/29 19:55:33 <span style="color:#f92672">[</span>5f95ff<span style="color:#f92672">]</span> scale-wildfly got matched
<span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/29 19:55:33 <span style="color:#f92672">[</span>5f95ff<span style="color:#f92672">]</span> scale-wildfly hook triggered successfully
<span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/29 19:55:33 <span style="color:#ae81ff">200</span> | 130.171µs | monitor.mmagnani.lab:9000 | POST /hooks/scale-wildfly 
<span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/29 19:55:33 <span style="color:#f92672">[</span>5f95ff<span style="color:#f92672">]</span> executing /var/scripts/scale-wildfly.sh <span style="color:#f92672">(</span>/var/scripts/scale-wildfly.sh<span style="color:#f92672">)</span> with arguments <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;/var/scripts/scale-wildfly.sh&#34;</span><span style="color:#f92672">]</span> and environment <span style="color:#f92672">[]</span> using /var/webhook as cwd
<span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/29 19:55:36 <span style="color:#f92672">[</span>5f95ff<span style="color:#f92672">]</span> command output: <span style="color:#f92672">[</span>domain@10.0.0.68:9990 /<span style="color:#f92672">]</span> /host<span style="color:#f92672">=</span>slave0/server-config<span style="color:#f92672">=</span>server-marketing-8:add<span style="color:#f92672">(</span>auto-start<span style="color:#f92672">=</span>true,socket-binding-port-offset<span style="color:#f92672">=</span>500,group<span style="color:#f92672">=</span>marketing<span style="color:#f92672">)</span>
<span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;outcome&#34;</span> <span style="color:#f92672">=</span>&gt; <span style="color:#e6db74">&#34;success&#34;</span>,
    <span style="color:#e6db74">&#34;result&#34;</span> <span style="color:#f92672">=</span>&gt; undefined,
    <span style="color:#e6db74">&#34;server-groups&#34;</span> <span style="color:#f92672">=</span>&gt; undefined
<span style="color:#f92672">}</span>
<span style="color:#f92672">[</span>domain@10.0.0.68:9990 /<span style="color:#f92672">]</span> /host<span style="color:#f92672">=</span>slave0/server-config<span style="color:#f92672">=</span>server-marketing-8/system-property<span style="color:#f92672">=</span>jboss.node.name:add<span style="color:#f92672">(</span>value<span style="color:#f92672">=</span>node-marketing-8<span style="color:#f92672">)</span>
<span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;outcome&#34;</span> <span style="color:#f92672">=</span>&gt; <span style="color:#e6db74">&#34;success&#34;</span>,
    <span style="color:#e6db74">&#34;result&#34;</span> <span style="color:#f92672">=</span>&gt; undefined,
    <span style="color:#e6db74">&#34;server-groups&#34;</span> <span style="color:#f92672">=</span>&gt; undefined
<span style="color:#f92672">}</span>
<span style="color:#f92672">[</span>domain@10.0.0.68:9990 /<span style="color:#f92672">]</span> /host<span style="color:#f92672">=</span>slave0/server-config<span style="color:#f92672">=</span>server-marketing-8/system-property<span style="color:#f92672">=</span>wildfly.balancer.name:add<span style="color:#f92672">(</span>value<span style="color:#f92672">=</span>marketing-lb<span style="color:#f92672">)</span>
<span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;outcome&#34;</span> <span style="color:#f92672">=</span>&gt; <span style="color:#e6db74">&#34;success&#34;</span>,
    <span style="color:#e6db74">&#34;result&#34;</span> <span style="color:#f92672">=</span>&gt; undefined,
    <span style="color:#e6db74">&#34;server-groups&#34;</span> <span style="color:#f92672">=</span>&gt; undefined
<span style="color:#f92672">}</span>
<span style="color:#f92672">[</span>domain@10.0.0.68:9990 /<span style="color:#f92672">]</span> /host<span style="color:#f92672">=</span>slave0/server<span style="color:#f92672">=</span>server-marketing-8:start
<span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;outcome&#34;</span> <span style="color:#f92672">=</span>&gt; <span style="color:#e6db74">&#34;success&#34;</span>,
    <span style="color:#e6db74">&#34;result&#34;</span> <span style="color:#f92672">=</span>&gt; <span style="color:#e6db74">&#34;STARTING&#34;</span>
<span style="color:#f92672">}</span>
<span style="color:#f92672">[</span>domain@10.0.0.68:9990 /<span style="color:#f92672">]</span> 
<span style="color:#f92672">[</span>webhook<span style="color:#f92672">]</span> 2019/12/29 19:55:36 <span style="color:#f92672">[</span>5f95ff<span style="color:#f92672">]</span> finished handling scale-wildfly
</code></pre></div><p>A new instance has been created and our application is available again:</p>
<p><img src="/static/201912-hawildfly-29.png" alt=""></p>
<p><img src="/static/201912-hawildfly-30.png" alt=""></p>
<p>With this we have met our goal of having an elastic, scaling environment automatically based on events.</p>
<p>Any questions or suggestions let me know!</p>
<p>Best,</p>

      </div>
      
      
      <div class="pt-4 mt-2 border-top">
        <div class="row">
          <div class="col-md-7 small text-muted post-meta my-1">
            
            
              
            
              
            
              
            
              
            </div>
          
          
          
        </div>
      
        
          <div class="mt-3">
            <span class="">Tags:</span>&nbsp;&nbsp;&nbsp;<a href="/tags/jboss"><span class="badge badge-pill bg-clr2 text-nav mr-2 py-2">JBOSS</span></a><a href="/tags/wildfly"><span class="badge badge-pill bg-clr2 text-nav mr-2 py-2">WILDFLY</span></a><a href="/tags/ha"><span class="badge badge-pill bg-clr2 text-nav mr-2 py-2">HA</span></a><a href="/tags/redhat"><span class="badge badge-pill bg-clr2 text-nav mr-2 py-2">REDHAT</span></a><a href="/tags/centos"><span class="badge badge-pill bg-clr2 text-nav mr-2 py-2">CENTOS</span></a><a href="/tags/modcluster"><span class="badge badge-pill bg-clr2 text-nav mr-2 py-2">MODCLUSTER</span></a></div>
        
      
      </div>
      
    </div>
  </div>
  
  
  
</div>

    </div><footer class="text-center p-2 text-muted footer">
  
  
  <div class="py-2 lead">
    
    
    <a class="ml-2" href="https://github.com/cognitionsh"><span class="fab fa-github"
        aria-label="Join us on Github"></span></a>
    
    
  </div>
  
  

  <div class="py-2 lead">
    Cognition by Mauricio Magnani
  </div>

  <div class="py-2 copyright">
    
  </div>
</footer>
    
    
    
    <script src="/assets/js/main.min.6ff0d57b7558f0225c80bade926a349330bc25d85e7ceff50d911f1156023c3e.js" integrity="sha256-b/DVe3VY8CJcgLrekmo0kzC8JdhefO/1DZEfEVYCPD4=" crossorigin="anonymous"></script>
    <script src="/assets/js/custom.min.c8274a0cac0477f854e63f09626cc63858bb2bc9db8faecbb2834846952c7fd6.js" integrity="sha256-yCdKDKwEd/hU5j8JYmzGOFi7K8nbj67LsoNIRpUsf9Y=" crossorigin="anonymous"></script>
    
    <link href="https://fonts.googleapis.com/css?family=Roboto|Lato&display=swap" rel="stylesheet">
    
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
  </body>
</html>
